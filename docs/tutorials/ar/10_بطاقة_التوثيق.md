# الدرس 10: بطاقة التوثيق

## المقدمة

**بطاقة التوثيق** هي وحدة PyArchInit لإدارة التوثيق الرسومي للحفر: المساقط، المقاطع، الواجهات، المرفوعات وأي منتج رسومي آخر يُنتج أثناء الأنشطة الأثرية.

### أنواع التوثيق

- **المساقط**: مساقط طبقات، مراحل، عامة
- **المقاطع**: مقاطع طبقية
- **الواجهات**: ارتفاعات جدارية، جبهات حفر
- **المرفوعات**: مرفوعات طبوغرافية، فوتوغرامترية
- **صور طبوغرافية**: منتجات الدرون/الفوتوغرامتريا
- **رسومات القطع**: الفخار، المعادن، إلخ.

---

## الوصول إلى البطاقة

### عبر القائمة
1. قائمة **PyArchInit** في شريط قوائم QGIS
2. اختيار **بطاقة التوثيق** (أو **Documentation form**)

### عبر شريط الأدوات
1. تحديد شريط أدوات PyArchInit
2. النقر على أيقونة **التوثيق**

---

## نظرة عامة على الواجهة

### المناطق الرئيسية

| # | المنطقة | الوصف |
|---|---------|-------|
| 1 | شريط أدوات DBMS | التنقل، البحث، الحفظ |
| 2 | معلومات قاعدة البيانات | حالة السجل، الترتيب، العداد |
| 3 | حقول التعريف | الموقع، الاسم، التاريخ |
| 4 | الحقول النمطية | النوع، المصدر، المقياس |
| 5 | الحقول الوصفية | الراسم، الملاحظات |

---

## شريط أدوات DBMS

### الأزرار القياسية

| الوظيفة | الوصف |
|---------|-------|
| الأول/السابق/التالي/الأخير | التنقل بين السجلات |
| سجل جديد | إنشاء سجل جديد |
| حفظ | حفظ التعديلات |
| حذف | حذف السجل |
| بحث جديد / بحث | وظائف البحث |
| ترتيب حسب | ترتيب النتائج |
| عرض الكل | عرض جميع السجلات |

---

## حقول البطاقة

### الموقع

**الحقل**: `comboBox_sito_doc`
**قاعدة البيانات**: `sito`

الموقع الأثري المرجعي.

### اسم التوثيق

**الحقل**: `lineEdit_nome_doc`
**قاعدة البيانات**: `nome_doc`

الاسم التعريفي للوثيقة.

**اتفاقيات التسمية:**
- `P` = مسقط (مثل P001)
- `S` = مقطع (مثل S001)
- `PR` = واجهة (مثل PR001)
- `R` = مرفوع (مثل R001)

### التاريخ

**الحقل**: `dateEdit_data`
**قاعدة البيانات**: `data`

تاريخ إنجاز الرسم/المرفوع.

### نوع التوثيق

**الحقل**: `comboBox_tipo_doc`
**قاعدة البيانات**: `tipo_documentazione`

نمط الوثيقة.

**القيم النموذجية:**
| النوع | الوصف |
|-------|-------|
| مسقط طبقة | وحدة طبقية واحدة |
| مسقط مرحلة | عدة وحدات طبقية متزامنة |
| مسقط عام | رؤية شاملة |
| مقطع طبقي | ملف عمودي |
| واجهة | ارتفاع جداري |
| مرفوع طبوغرافي | مخطط عام |
| صورة طبوغرافية | من الفوتوغرامتريا |
| رسم قطعة | فخار، معدن، إلخ. |

### المصدر

**الحقل**: `comboBox_sorgente`
**قاعدة البيانات**: `sorgente`

المصدر/طريقة الإنتاج.

**القيم:**
- مرفوع مباشر
- فوتوغرامتريا
- ماسح ليزري
- GPS/محطة كلية
- رقمنة CAD
- صورة طبوغرافية بالدرون

### المقياس

**الحقل**: `comboBox_scala`
**قاعدة البيانات**: `scala`

مقياس التمثيل.

**المقاييس الشائعة:**
| المقياس | الاستخدام النموذجي |
|---------|-------------------|
| 1:1 | رسومات القطع |
| 1:5 | التفاصيل |
| 1:10 | المقاطع، التفاصيل |
| 1:20 | مساقط الطبقات |
| 1:50 | المساقط العامة |
| 1:100 | المخططات |
| 1:200+ | الخرائط الطبوغرافية |

### الراسم

**الحقل**: `comboBox_disegnatore`
**قاعدة البيانات**: `disegnatore`

مؤلف الرسم/المرفوع.

### الملاحظات

**الحقل**: `textEdit_note`
**قاعدة البيانات**: `note`

ملاحظات إضافية حول الوثيقة.

---

## سير العمل التشغيلي

### تسجيل توثيق جديد

1. **فتح البطاقة**
   - عبر القائمة أو شريط الأدوات

2. **سجل جديد**
   - النقر على "سجل جديد"

3. **بيانات التعريف**
   ```
   الموقع: فيلا سيتيفينيستري الرومانية
   الاسم: P025
   التاريخ: 15/06/2024
   ```

4. **التصنيف**
   ```
   النوع: مسقط طبقة
   المصدر: مرفوع مباشر
   المقياس: 1:20
   ```

5. **المؤلف والملاحظات**
   ```
   الراسم: م. روسي
   الملاحظات: مسقط الوحدة الطبقية 150. يُظهر
   حدود الأرضية المدكوكة.
   ```

6. **الحفظ**
   - النقر على "حفظ"

### البحث عن التوثيق

1. النقر على "بحث جديد"
2. ملء معايير البحث:
   - الموقع
   - نوع التوثيق
   - المقياس
   - الراسم
3. النقر على "بحث"
4. التنقل بين النتائج

---

## تصدير PDF

تدعم البطاقة التصدير إلى PDF لـ:
- قائمة التوثيق
- بطاقات مفصلة

---

## أفضل الممارسات

### التسمية

- استخدام رموز متسقة في كامل المشروع
- ترقيم تسلسلي حسب النوع
- توثيق الاتفاقيات المتبعة

### التنظيم

- الربط دائماً بالموقع المرجعي
- تحديد المقياس الفعلي
- تسجيل التاريخ والمؤلف

### الأرشفة

- ربط الملفات الرقمية عبر إدارة الوسائط
- الاحتفاظ بنسخ احتياطية
- استخدام صيغ قياسية (PDF، TIFF)

---

## استكشاف الأخطاء وإصلاحها

### المشكلة: نوع التوثيق غير متاح

**السبب**: القاموس غير مُهيأ.

**الحل**:
1. فتح بطاقة القاموس
2. إضافة الأنواع المفقودة لـ `documentazione_table`

### المشكلة: الملف غير معروض

**السبب**: المسار غير صحيح أو الملف مفقود.

**الحل**:
1. التحقق من وجود الملف
2. التحقق من المسار في تكوين الوسائط

---

## المراجع

### قاعدة البيانات

- **الجدول**: `documentazione_table`
- **فئة المحول**: `DOCUMENTAZIONE`
- **المعرف**: `id_documentazione`

### الملفات المصدرية

- **واجهة المستخدم**: `gui/ui/Documentazione.ui`
- **المتحكم**: `tabs/Documentazione.py`
- **تصدير PDF**: `modules/utility/pyarchinit_exp_Documentazionesheet_pdf.py`

---

## فيديو تعليمي

### إدارة التوثيق الرسومي
**المدة**: 6-8 دقائق
- تسجيل توثيق جديد
- التصنيف والبيانات الوصفية
- البحث والاستشارة

[فيديو مؤقت: video_documentazione.mp4]

---

*آخر تحديث: يناير 2026*
*PyArchInit - نظام إدارة البيانات الأثرية*
