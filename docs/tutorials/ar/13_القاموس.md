# الدرس 13: إدارة القاموس

## المقدمة

**قاموس** PyArchInit هو النظام المركزي لإدارة المفردات المحكمة. يتيح تعريف وصيانة قوائم القيم المستخدمة في جميع بطاقات الإضافة، مما يضمن الاتساق المصطلحي ويُسهل البحث.

### الوظائف الرئيسية

- إدارة المفردات لكل بطاقة
- دعم متعدد اللغات
- رموز وأوصاف موسعة
- تكامل مع GPT للاقتراحات
- استيراد/تصدير من ملفات CSV

---

## الوصول إلى القاموس

### عبر القائمة
1. قائمة **PyArchInit** في شريط قوائم QGIS
2. اختيار **القاموس** (أو **Thesaurus form**)

### عبر شريط الأدوات
1. تحديد شريط أدوات PyArchInit
2. النقر على أيقونة **القاموس** (كتاب/معجم)

---

## نظرة عامة على الواجهة

### المناطق الرئيسية

| # | المنطقة | الوصف |
|---|---------|-------|
| 1 | شريط أدوات DBMS | التنقل، البحث، الحفظ |
| 2 | اختيار الجدول | اختيار البطاقة للتكوين |
| 3 | حقول الرمز | الرمز، التوسيع، النمط |
| 4 | الوصف | وصف تفصيلي للمصطلح |
| 5 | اللغة | اختيار اللغة |
| 6 | الأدوات | استيراد CSV، اقتراحات GPT |

---

## حقول القاموس

### اسم الجدول

**الحقل**: `comboBox_nome_tabella`
**قاعدة البيانات**: `nome_tabella`

اختيار البطاقة لتعريف قيمها.

**الجداول المتاحة:**
| الجدول | الوصف |
|--------|-------|
| `us_table` | بطاقة الوحدة الطبقية |
| `site_table` | بطاقة الموقع |
| `periodizzazione_table` | التأريخ |
| `inventario_materiali_table` | جرد المواد |
| `pottery_table` | بطاقة الفخار |
| `campioni_table` | بطاقة العينات |
| `documentazione_table` | التوثيق |
| `tomba_table` | بطاقة القبر |
| `individui_table` | بطاقة الأفراد |
| `fauna_table` | علم آثار الحيوان |
| `ut_table` | بطاقة وحدة التصنيف |

### الرمز

**الحقل**: `comboBox_sigla`
**قاعدة البيانات**: `sigla`

رمز قصير/اختصار للمصطلح.

**أمثلة:**
- `MR` للجدار
- `US` للوحدة الطبقية
- `CR` للفخار

### الرمز الموسع

**الحقل**: `comboBox_sigla_estesa`
**قاعدة البيانات**: `sigla_estesa`

الشكل الكامل للمصطلح.

**أمثلة:**
- `جدار محيطي`
- `وحدة طبقية`
- `فخار عادي`

### الوصف

**الحقل**: `textEdit_descrizione_sigla`
**قاعدة البيانات**: `descrizione`

وصف تفصيلي للمصطلح، تعريف، ملاحظات الاستخدام.

### نمط الرمز

**الحقل**: `comboBox_tipologia_sigla`
**قاعدة البيانات**: `tipologia_sigla`

رمز رقمي يحدد الحقل الهدف.

**بنية الرموز:**
```
X.Y حيث:
X = رقم الجدول
Y = رقم الحقل
```

**أمثلة لـ us_table:**
| الرمز | الحقل |
|-------|-------|
| 1.1 | التعريف الطبقي |
| 1.2 | طريقة التكوين |
| 1.3 | نوع الوحدة الطبقية |

### اللغة

**الحقل**: `comboBox_lingua`
**قاعدة البيانات**: `lingua`

لغة المصطلح.

**اللغات المدعومة:**
- IT (الإيطالية)
- EN_US (الإنجليزية)
- DE (الألمانية)
- FR (الفرنسية)
- ES (الإسبانية)
- AR (العربية)
- CA (الكتالونية)

---

## حقول التسلسل الهرمي

### معرف الأصل

**الحقل**: `comboBox_id_parent`
**قاعدة البيانات**: `id_parent`

معرف المصطلح الأصل (للهياكل الهرمية).

### رمز الأصل

**الحقل**: `comboBox_parent_sigla`
**قاعدة البيانات**: `parent_sigla`

رمز المصطلح الأصل.

### مستوى التسلسل

**الحقل**: `spinBox_hierarchy`
**قاعدة البيانات**: `hierarchy_level`

المستوى في التسلسل (0=جذر، 1=المستوى الأول، إلخ.).

---

## وظائف خاصة

### اقتراحات GPT

يستخدم زر "الاقتراحات" OpenAI GPT لـ:
- إنشاء أوصاف تلقائية
- توفير روابط ويكيبيديا مرجعية
- اقتراح تعريفات في السياق الأثري

**الاستخدام:**
1. اختيار أو إدخال مصطلح في "الرمز الموسع"
2. النقر على "اقتراحات"
3. اختيار نموذج GPT
4. انتظار الإنشاء
5. المراجعة والحفظ

**ملاحظة:** يتطلب تكوين مفتاح API لـ OpenAI.

### استيراد CSV

لقواعد بيانات SQLite يمكن استيراد المفردات من ملفات CSV.

**صيغة CSV المطلوبة:**
```csv
nome_tabella,sigla,sigla_estesa,descrizione,tipologia_sigla,lingua
us_table,MR,جدار,هيكل جداري,1.3,AR
us_table,PV,أرضية,سطح مشي,1.3,AR
```

**الإجراء:**
1. النقر على "استيراد CSV"
2. اختيار الملف
3. تأكيد الاستيراد
4. التحقق من البيانات المستوردة

---

## سير العمل التشغيلي

### إضافة مصطلح جديد

1. **فتح القاموس**
   - عبر القائمة أو شريط الأدوات

2. **سجل جديد**
   - النقر على "سجل جديد"

3. **اختيار الجدول**
   ```
   اسم الجدول: us_table
   ```

4. **تعريف المصطلح**
   ```
   الرمز: PZ
   الرمز الموسع: بئر
   نمط الرمز: 1.3
   اللغة: AR
   ```

5. **الوصف**
   ```
   هيكل محفور في الأرض
   لتوفير المياه.
   عادة دائري الشكل
   مع بطانة من الحجر أو الطوب.
   ```

6. **الحفظ**
   - النقر على "حفظ"

### البحث عن المصطلحات

1. النقر على "بحث جديد"
2. ملء معايير البحث:
   - اسم الجدول
   - الرمز أو الرمز الموسع
   - اللغة
3. النقر على "بحث"
4. التنقل بين النتائج

### تعديل مصطلح موجود

1. البحث عن المصطلح للتعديل
2. تعديل الحقول الضرورية
3. النقر على "حفظ"

---

## تنظيم رموز النمط

### البنية الموصى بها

لكل جدول، تنظيم الرموز بشكل منهجي:

**us_table (1.x):**
| الرمز | الحقل |
|-------|-------|
| 1.1 | التعريف الطبقي |
| 1.2 | طريقة التكوين |
| 1.3 | نوع الوحدة الطبقية |
| 1.4 | القوام |
| 1.5 | اللون |

**inventario_materiali_table (2.x):**
| الرمز | الحقل |
|-------|-------|
| 2.1 | نوع القطعة |
| 2.2 | فئة المادة |
| 2.3 | التعريف |
| 2.4 | حالة الحفظ |

**pottery_table (3.x):**
| الرمز | الحقل |
|-------|-------|
| 3.1 | الشكل |
| 3.2 | الصنف |
| 3.3 | العجينة |
| 3.4 | معالجة السطح |

---

## أفضل الممارسات

### الاتساق المصطلحي

- استخدام نفس المصطلحات دائماً لنفس المفاهيم
- تجنب المرادفات غير الموثقة
- توثيق الاتفاقيات المتبعة

### تعدد اللغات

- إنشاء المصطلحات بجميع اللغات الضرورية
- الحفاظ على التطابق بين اللغات
- استخدام الترجمات الرسمية عند توفرها

### التسلسل الهرمي

- استخدام البنية الهرمية للمصطلحات المترابطة
- تحديد المستويات بوضوح
- توثيق العلاقات

### الصيانة

- مراجعة المفردات دورياً
- حذف المصطلحات المهجورة
- تحديث الأوصاف

---

## استكشاف الأخطاء وإصلاحها

### المشكلة: المصطلح غير مرئي في القوائم المنسدلة

**السبب:** رمز النمط خاطئ أو اللغة غير مطابقة.

**الحل:**
1. التحقق من رمز tipologia_sigla
2. التحقق من اللغة المحددة
3. التحقق من حفظ السجل

### المشكلة: فشل استيراد CSV

**السبب:** صيغة الملف غير صحيحة.

**الحل:**
1. التحقق من بنية CSV
2. التحقق من الفواصل (فاصلة)
3. التحقق من الترميز (UTF-8)

### المشكلة: اقتراحات GPT لا تعمل

**السبب:** مفتاح API مفقود أو غير صالح.

**الحل:**
1. التحقق من تكوين مفتاح API
2. التحقق من اتصال الإنترنت
3. التحقق من رصيد OpenAI

---

## المراجع

### قاعدة البيانات

- **الجدول**: `pyarchinit_thesaurus_sigle`
- **فئة المحول**: `PYARCHINIT_THESAURUS_SIGLE`
- **المعرف**: `id_thesaurus_sigle`

### الملفات المصدرية

- **واجهة المستخدم**: `gui/ui/Thesaurus.ui`
- **المتحكم**: `tabs/Thesaurus.py`

---

## فيديوهات تعليمية

### إدارة المفردات
**المدة**: 10-12 دقيقة
- بنية القاموس
- إضافة المصطلحات
- تنظيم الرموز

[فيديو مؤقت: video_thesaurus_gestione.mp4]

### تعدد اللغات والاستيراد
**المدة**: 8-10 دقائق
- تكوين اللغات
- الاستيراد من CSV
- اقتراحات GPT

[فيديو مؤقت: video_thesaurus_avanzato.mp4]

---

*آخر تحديث: يناير 2026*
*PyArchInit - نظام إدارة البيانات الأثرية*

---

## رسوم متحركة تفاعلية

استكشف الرسوم المتحركة التفاعلية لمعرفة المزيد حول هذا الموضوع.

[افتح الرسوم المتحركة التفاعلية](../animations/pyarchinit_thesaurus_animation.html)
