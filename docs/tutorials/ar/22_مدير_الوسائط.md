# الدرس 22: مدير الوسائط

## المقدمة

**مدير الوسائط** هو الأداة المركزية في PyArchInit لإدارة الصور والمحتويات المتعددة الوسائط المرتبطة بالسجلات الأثرية. يتيح ربط الصور والرسومات والفيديو ووسائط أخرى بالوحدات الطبقية والقطع والقبور والهياكل وغيرها من الكيانات.

### الوظائف الرئيسية

- إدارة مركزية لجميع الوسائط
- الربط بالكيانات الأثرية (الوحدات الطبقية، القطع، الفخار، القبور، الهياكل، الوحدات الطبوغرافية)
- عرض الصور المصغرة والصور بالحجم الأصلي
- وضع العلامات والتصنيف
- بحث متقدم
- تكامل مع GPT لتحليل الصور

## الوصول

### من القائمة
**PyArchInit** ← **مدير الوسائط**

### من شريط الأدوات
أيقونة **مدير الوسائط** في شريط أدوات PyArchInit

## الواجهة

### اللوحة الرئيسية

```
+----------------------------------------------------------+
|                    مدير الوسائط                           |
+----------------------------------------------------------+
| الموقع: [قائمة منسدلة]  المنطقة: [قائمة منسدلة]  US: [قائمة منسدلة] |
+----------------------------------------------------------+
| [شبكة الصور المصغرة]                                      |
|  +------+  +------+  +------+  +------+                  |
|  | صورة1|  | صورة2|  | صورة3|  | صورة4|                  |
|  +------+  +------+  +------+  +------+                  |
|  +------+  +------+  +------+  +------+                  |
|  | صورة5|  | صورة6|  | صورة7|  | صورة8|                  |
|  +------+  +------+  +------+  +------+                  |
+----------------------------------------------------------+
| العلامات: [قائمة العلامات المرتبطة]                       |
+----------------------------------------------------------+
| [التنقل] << < السجل X من Y > >>                          |
+----------------------------------------------------------+
```

### مرشحات البحث

| الحقل | الوصف |
|-------|-------|
| الموقع | تصفية حسب الموقع الأثري |
| المنطقة | تصفية حسب منطقة الحفر |
| الوحدة الطبقية | تصفية حسب الوحدة الطبقية |
| رمز الهيكل | تصفية حسب رمز الهيكل |
| رقم الهيكل | تصفية حسب رقم الهيكل |

### عناصر التحكم في الصور المصغرة

| العنصر | الوظيفة |
|--------|---------|
| شريط تمرير الحجم | ضبط حجم الصور المصغرة |
| نقر مزدوج | فتح الصورة بالحجم الأصلي |
| تحديد متعدد | Ctrl+نقر لتحديد عدة صور |

## إدارة الوسائط

### إضافة صور جديدة

1. فتح مدير الوسائط
2. اختيار الموقع المستهدف
3. النقر على **"سجل جديد"** أو استخدام القائمة السياقية
4. اختيار الصور للإضافة
5. ملء البيانات الوصفية

### ربط الوسائط بالكيانات

1. تحديد الصورة في الشبكة
2. في لوحة العلامات، اختيار:
   - **نوع الكيان**: الوحدة الطبقية، القطعة، الفخار، القبر، الهيكل، الوحدة الطبوغرافية
   - **المعرف**: رقم/رمز الكيان
3. النقر على **"ربط"**

### أنواع الكيانات المدعومة

| النوع | جدول قاعدة البيانات | الوصف |
|-------|---------------------|-------|
| الوحدة الطبقية | us_table | الوحدات الطبقية |
| القطعة | inventario_materiali_table | القطع/المواد |
| السيراميك | pottery_table | الفخار |
| القبر | tomba_table | المدافن |
| الهيكل | struttura_table | الهياكل |
| الوحدة الطبوغرافية | ut_table | الوحدات الطبوغرافية |

### عرض الصورة الأصلية

- **نقر مزدوج** على الصورة المصغرة
- يُفتح العارض مع:
  - تكبير (عجلة الماوس)
  - تحريك (سحب)
  - تدوير
  - قياس

## الوظائف المتقدمة

### البحث المتقدم

يدعم مدير الوسائط البحث حسب:
- اسم الملف
- تاريخ الإدخال
- الكيان المرتبط
- العلامات/الفئات

### تكامل GPT

زر **"GPT Sketch"** لـ:
- تحليل تلقائي للصورة
- توليد الوصف
- اقتراحات التصنيف

### التحميل عن بُعد

دعم للصور على خوادم بعيدة:
- روابط URL مباشرة
- خادم FTP
- التخزين السحابي

## قاعدة البيانات

### الجداول المعنية

| الجدول | الوصف |
|--------|-------|
| `media_table` | البيانات الوصفية للوسائط |
| `media_thumb_table` | الصور المصغرة |
| `media_to_entity_table` | روابط الكيانات |

### فئات المحول

- `MEDIA` - كيان الوسائط الرئيسي
- `MEDIA_THUMB` - الصور المصغرة
- `MEDIATOENTITY` - علاقة الوسائط-الكيان

## أفضل الممارسات

### 1. تنظيم الملفات

- استخدام أسماء ملفات وصفية
- التنظيم حسب الموقع/المنطقة/السنة
- الاحتفاظ بنسخ احتياطية للأصول

### 2. البيانات الوصفية

- ملء الموقع والمنطقة دائماً
- إضافة أوصاف ذات معنى
- استخدام علامات متسقة

### 3. جودة الصور

- الدقة الدنيا الموصى بها: 1920×1080
- الصيغة: JPG للصور، PNG للرسومات
- ضغط معتدل

### 4. الروابط

- ربط كل صورة بالكيانات المناسبة
- التحقق من الروابط بعد الاستيراد الجماعي
- استخدام البحث للصور غير المرتبطة

## حل المشكلات

### الصور المصغرة لا تُعرض

**الأسباب**:
- مسار الصورة خاطئ
- الملف مفقود
- مشاكل الأذونات

**الحلول**:
- التحقق من المسار في قاعدة البيانات
- فحص وجود الملف
- التحقق من أذونات المجلد

### الصورة غير قابلة للربط

**الأسباب**:
- الكيان غير موجود
- نوع الكيان خاطئ

**الحلول**:
- التحقق من وجود السجل
- فحص نوع الكيان المحدد

## المراجع

### الملفات المصدرية
- `tabs/Image_viewer.py` - الواجهة الرئيسية
- `modules/utility/pyarchinit_media_utility.py` - أدوات الوسائط

### قاعدة البيانات
- `media_table` - بيانات الوسائط
- `media_to_entity_table` - الروابط

---

## فيديو تعليمي

### مدير الوسائط الكامل
`[فيديو مؤقت: video_media_manager.mp4]`

**المحتويات**:
- إضافة الصور
- الربط بالكيانات
- البحث والمرشحات
- الوظائف المتقدمة

**المدة المتوقعة**: 15-18 دقيقة

---

*آخر تحديث: يناير 2026*

---

## رسوم متحركة تفاعلية

استكشف الرسوم المتحركة التفاعلية لمعرفة المزيد حول هذا الموضوع.

[افتح الرسوم المتحركة التفاعلية](../../pyarchinit_media_manager_animation.html)
