# الدرس 09: بطاقة العينات

## المقدمة

**بطاقة العينات** هي وحدة PyArchInit المخصصة لإدارة العينات الأثرية. تتيح تسجيل وتتبع جميع أنواع العينات المأخوذة أثناء الحفر: التربة، الفحم، البذور، العظام، الملاط، المعادن وغيرها من المواد المخصصة للتحليلات المتخصصة.

### أنواع العينات

تشمل العينات الأثرية:
- **الرواسب**: للتحليلات الرسوبية، الحبيبية
- **الفحم**: للتأريخ الإشعاعي (C14)
- **البذور/حبوب اللقاح**: للتحليلات الأثرية النباتية
- **العظام**: للتحليلات الأثرية الحيوانية، النظائرية، DNA
- **الملاط/الجص**: للتحليلات الأثرومترية
- **المعادن/الخبث**: للتحليلات المعدنية
- **الفخار**: لتحليل العجينة والمصدر

---

## الوصول إلى البطاقة

### عبر القائمة
1. قائمة **PyArchInit** في شريط قوائم QGIS
2. اختيار **بطاقة العينات** (أو **Samples form**)

### عبر شريط الأدوات
1. تحديد شريط أدوات PyArchInit
2. النقر على أيقونة **العينات**

---

## نظرة عامة على الواجهة

تعرض البطاقة تخطيطاً مبسطاً لإدارة العينات بسرعة.

### المناطق الرئيسية

| # | المنطقة | الوصف |
|---|---------|-------|
| 1 | شريط أدوات DBMS | التنقل، البحث، الحفظ |
| 2 | معلومات قاعدة البيانات | حالة السجل، الترتيب، العداد |
| 3 | حقول التعريف | الموقع، رقم العينة، النوع |
| 4 | الحقول الوصفية | الوصف، الملاحظات |
| 5 | حقول الحفظ | الصندوق، المكان |

---

## شريط أدوات DBMS

### أزرار التنقل

| الأيقونة | الوظيفة | الوصف |
|---------|---------|-------|
| السجل الأول | الانتقال إلى السجل الأول |
| السجل السابق | الانتقال إلى السجل السابق |
| السجل التالي | الانتقال إلى السجل التالي |
| السجل الأخير | الانتقال إلى السجل الأخير |

### أزرار CRUD

| الأيقونة | الوظيفة | الوصف |
|---------|---------|-------|
| سجل جديد | إنشاء سجل عينة جديد |
| حفظ | حفظ التعديلات |
| حذف | حذف السجل الحالي |

### أزرار البحث

| الأيقونة | الوظيفة | الوصف |
|---------|---------|-------|
| بحث جديد | بدء بحث جديد |
| بحث!!! | تنفيذ البحث |
| ترتيب حسب | ترتيب النتائج |
| عرض الكل | عرض جميع السجلات |

---

## حقول البطاقة

### الموقع

**الحقل**: `comboBox_sito`
**قاعدة البيانات**: `sito`

اختيار الموقع الأثري المنتمي إليه.

### رقم العينة

**الحقل**: `lineEdit_nr_campione`
**قاعدة البيانات**: `nr_campione`

رقم تعريفي تسلسلي للعينة.

### نوع العينة

**الحقل**: `comboBox_tipo_campione`
**قاعدة البيانات**: `tipo_campione`

التصنيف النمطي للعينة. تأتي القيم من القاموس.

**الأنواع الشائعة:**
| النوع | الوصف |
|-------|-------|
| رواسب | عينة تربة |
| فحم | للتأريخ C14 |
| بذور | بقايا ثمرية |
| عظام | بقايا حيوانية |
| ملاط | روابط بناء |
| فخار | لتحليل العجينة |
| معدن | للتحليلات المعدنية |
| حبوب لقاح | للتحليلات اللقاحية |

### الوصف

**الحقل**: `textEdit_descrizione`
**قاعدة البيانات**: `descrizione`

وصف تفصيلي للعينة.

**المحتويات المُوصى بها:**
- الخصائص الفيزيائية للعينة
- الكمية المأخوذة
- طريقة الأخذ
- سبب أخذ العينة
- التحليلات المخططة

### المنطقة

**الحقل**: `comboBox_area`
**قاعدة البيانات**: `area`

منطقة الحفر المصدرية.

### الوحدة الطبقية

**الحقل**: `comboBox_us`
**قاعدة البيانات**: `us`

الوحدة الطبقية المصدرية.

### رقم جرد المواد

**الحقل**: `lineEdit_nr_inv_mat`
**قاعدة البيانات**: `numero_inventario_materiale`

إذا كانت العينة مرتبطة بقطعة مُجردة، تحديد رقم الجرد.

### رقم الصندوق

**الحقل**: `lineEdit_nr_cassa`
**قاعدة البيانات**: `nr_cassa`

صندوق أو حاوية الحفظ.

### مكان الحفظ

**الحقل**: `comboBox_luogo_conservazione`
**قاعدة البيانات**: `luogo_conservazione`

أين تُحفظ العينة.

**أمثلة:**
- مختبر الحفر
- مخزن المتحف
- مختبر تحليل خارجي
- الجامعة

---

## سير العمل التشغيلي

### إنشاء عينة جديدة

1. **فتح البطاقة**
   - عبر القائمة أو شريط الأدوات

2. **سجل جديد**
   - النقر على "سجل جديد"

3. **بيانات التعريف**
   ```
   الموقع: فيلا سيتيفينيستري الرومانية
   رقم العينة: C-2024-001
   نوع العينة: فحم
   ```

4. **المصدر**
   ```
   المنطقة: 1000
   الوحدة الطبقية: 150
   ```

5. **الوصف**
   ```
   عينة فحم مأخوذة من
   سطح المحترق للوحدة الطبقية 150.
   الكمية: حوالي 50 غرام.
   مأخوذة للتأريخ C14.
   ```

6. **الحفظ**
   ```
   رقم الصندوق: Camp-1
   المكان: مختبر الحفر
   ```

7. **الحفظ**
   - النقر على "حفظ"

### البحث عن العينات

1. النقر على "بحث جديد"
2. ملء معايير البحث:
   - الموقع
   - نوع العينة
   - الوحدة الطبقية
3. النقر على "بحث"
4. التنقل بين النتائج

---

## تصدير PDF

تدعم البطاقة التصدير إلى PDF لـ:
- قائمة العينات
- بطاقات مفردة مفصلة

---

## أفضل الممارسات

### التسمية

- استخدام رموز فريدة ومُعبرة
- الصيغة المُوصى بها: `الموقع-السنة-التسلسل`
- مثال: `VRS-2024-C001`

### الأخذ

- توثيق إحداثيات الأخذ دائماً
- تصوير نقطة الأخذ
- تدوين العمق والسياق

### الحفظ

- استخدام حاويات مناسبة للنوع
- وسم كل عينة بوضوح
- الحفاظ على ظروف ملائمة

### التوثيق

- الربط دائماً بالوحدة الطبقية المصدرية
- تحديد التحليلات المخططة
- تسجيل الإرسال إلى مختبرات خارجية

---

## استكشاف الأخطاء وإصلاحها

### المشكلة: نوع العينة غير متاح

**السبب**: القاموس غير مُهيأ.

**الحل**:
1. فتح بطاقة القاموس
2. إضافة النوع المفقود لـ `campioni_table`
3. الحفظ وإعادة فتح بطاقة العينات

### المشكلة: الوحدة الطبقية غير معروضة

**السبب**: الوحدة الطبقية غير مسجلة للموقع المحدد.

**الحل**:
1. التحقق من وجود الوحدة الطبقية في بطاقة الوحدة الطبقية
2. التحقق من انتمائها لنفس الموقع

---

## المراجع

### قاعدة البيانات

- **الجدول**: `campioni_table`
- **فئة المحول**: `CAMPIONI`
- **المعرف**: `id_campione`

### الملفات المصدرية

- **واجهة المستخدم**: `gui/ui/Campioni.ui`
- **المتحكم**: `tabs/Campioni.py`
- **تصدير PDF**: `modules/utility/pyarchinit_exp_Campsheet_pdf.py`

---

## فيديو تعليمي

### إدارة العينات
**المدة**: 5-6 دقائق
- إنشاء عينة جديدة
- ملء الحقول
- البحث والتصدير

[فيديو مؤقت: video_campioni.mp4]

---

*آخر تحديث: يناير 2026*
*PyArchInit - نظام إدارة البيانات الأثرية*
