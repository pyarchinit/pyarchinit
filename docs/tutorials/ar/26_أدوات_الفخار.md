# الدرس 26: أدوات الفخار (Pottery Tools)

## المقدمة

**أدوات الفخار** هي وحدة متقدمة لمعالجة صور السيراميك. توفر أدوات لاستخراج الصور من PDF، وتوليد تخطيطات اللوحات، ومعالجة الرسومات بالذكاء الاصطناعي (PotteryInk)، ووظائف متخصصة أخرى لتوثيق السيراميك.

### الوظائف الرئيسية

- استخراج الصور من PDF
- توليد تخطيطات لوحات السيراميك
- معالجة الصور بالذكاء الاصطناعي
- تحويل صيغ الرسومات
- التكامل مع بطاقة الفخار

## الوصول

### من القائمة
**PyArchInit** ← **أدوات الفخار**

## الواجهة

### اللوحة الرئيسية

```
+--------------------------------------------------+
|              أدوات الفخار                         |
+--------------------------------------------------+
| [تبويب: استخراج PDF]                             |
| [تبويب: مولد التخطيط]                            |
| [تبويب: معالجة الصور]                            |
| [تبويب: PotteryInk AI]                           |
+--------------------------------------------------+
| [شريط التقدم]                                    |
| [رسائل السجل]                                    |
+--------------------------------------------------+
```

## تبويب استخراج PDF

### الوظيفة

استخراج الصور تلقائياً من مستندات PDF التي تحتوي على لوحات سيراميك.

### الاستخدام

1. تحديد ملف PDF المصدر
2. تحديد مجلد الوجهة
3. النقر على **"استخراج"**
4. يتم حفظ الصور كملفات منفصلة

### الخيارات

| الخيار | الوصف |
|--------|-------|
| DPI | دقة الاستخراج (150-600) |
| الصيغة | PNG، JPG، TIFF |
| الصفحات | الكل أو نطاق محدد |

## تبويب مولد التخطيط

### الوظيفة

توليد لوحات سيراميك تلقائياً بتخطيط موحد.

### أنواع التخطيط

| التخطيط | الوصف |
|---------|-------|
| الشبكة | صور في شبكة منتظمة |
| التسلسل | صور في تسلسل مرقم |
| المقارنة | تخطيط للمقارنة |
| الكتالوج | صيغة كتالوج مع تسميات توضيحية |

### الاستخدام

1. تحديد الصور للتضمين
2. اختيار نوع التخطيط
3. تكوين المعاملات (الأبعاد، الهوامش)
4. توليد اللوحة

### معاملات التخطيط

| المعامل | الوصف |
|---------|-------|
| حجم الصفحة | A4، A3، مخصص |
| الاتجاه | عمودي، أفقي |
| الهوامش | مسافة الحواف |
| التباعد | المسافة بين الصور |
| التسميات التوضيحية | نص تحت الصور |

## تبويب معالجة الصور

### الوظيفة

المعالجة الجماعية لصور السيراميك.

### العمليات المتاحة

| العملية | الوصف |
|---------|-------|
| تغيير الحجم | تصغير/تكبير الصور |
| القص | قص تلقائي/يدوي |
| التدوير | تدوير بالدرجات |
| التحويل | تغيير الصيغة |
| التحسين | ضغط الجودة |

### المعالجة الجماعية

1. تحديد المجلد المصدر
2. اختيار العمليات للتطبيق
3. تحديد الوجهة
4. تنفيذ المعالجة

## تبويب PotteryInk AI

### الوظيفة

استخدام الذكاء الاصطناعي لـ:
- تحويل الصورة → رسم تقني
- التعرف على أشكال السيراميك
- اقتراحات التصنيف
- القياس التلقائي

### المتطلبات

- بيئة Python افتراضية مُكونة
- نماذج AI مُنزلة (YOLO، إلخ)
- GPU موصى بها (لكن غير إلزامية)

### الاستخدام

1. تحميل صورة السيراميك
2. تحديد نوع المعالجة
3. انتظار معالجة AI
4. التحقق من النتيجة وحفظها

### أنواع معالجة AI

| النوع | الوصف |
|-------|-------|
| تحويل الحبر | تحويل الصورة إلى رسم تقني |
| اكتشاف الشكل | التعرف على شكل الإناء |
| استخراج الملف الجانبي | استخراج الملف الجانبي للسيراميك |
| تحليل الزخرفة | تحليل الزخارف |

## البيئة الافتراضية

### الإعداد التلقائي

عند التشغيل الأول، أدوات الفخار:
1. تنشئ بيئة افتراضية في `~/pyarchinit/bin/pottery_venv/`
2. تثبت التبعيات اللازمة
3. تنزل نماذج AI (إذا طُلب)

### التبعيات

- PyTorch
- Ultralytics (YOLO)
- OpenCV
- Pillow

### التحقق من التثبيت

السجل يُظهر الحالة:
```
✓ تم إنشاء البيئة الافتراضية
✓ تم تثبيت التبعيات
✓ تم تنزيل النماذج
✓ تم تهيئة أدوات الفخار بنجاح!
```

## التكامل مع قاعدة البيانات

### الربط ببطاقة الفخار

الصور المُعالجة يمكن:
- ربطها تلقائياً بسجلات الفخار
- حفظها مع البيانات الوصفية المناسبة
- تنظيمها حسب الموقع/الجرد

## أفضل الممارسات

### 1. جودة الصور المدخلة

- الدقة الدنيا: 300 DPI
- إضاءة موحدة
- خلفية محايدة (أبيض/رمادي)
- مقياس متري مرئي

### 2. معالجة AI

- التحقق دائماً من نتائج AI
- التصحيح اليدوي إذا لزم الأمر
- حفظ الأصليات والمُعالجة

### 3. تنظيم المخرجات

- استخدام تسمية متسقة
- التنظيم حسب الموقع/الحملة
- الحفاظ على إمكانية التتبع

## حل المشكلات

### البيئة الافتراضية لم تُنشأ

**الأسباب**:
- Python غير موجود
- أذونات غير كافية

**الحلول**:
- التحقق من تثبيت Python
- فحص أذونات المجلد

### معالجة AI بطيئة

**الأسباب**:
- لا يوجد GPU متاح
- الصور كبيرة جداً

**الحلول**:
- تقليل حجم الصور
- استخدام CPU (أبطأ لكنه يعمل)

### فشل استخراج PDF

**الأسباب**:
- PDF محمي
- صيغة غير مدعومة

**الحلول**:
- التحقق من حماية PDF
- محاولة استخدام برنامج PDF آخر

## المراجع

### الملفات المصدرية
- `tabs/Pottery_tools.py` - الواجهة الرئيسية
- `modules/utility/pottery_utilities.py` - أدوات المعالجة
- `gui/ui/Pottery_tools.ui` - تخطيط واجهة المستخدم

### المجلدات
- `~/pyarchinit/bin/pottery_venv/` - البيئة الافتراضية
- `~/pyarchinit/models/` - نماذج AI

---

## فيديو تعليمي

### أدوات الفخار الكاملة
`[فيديو مؤقت: video_pottery_tools.mp4]`

**المحتويات**:
- الاستخراج من PDF
- توليد التخطيط
- معالجة AI
- التكامل مع قاعدة البيانات

**المدة المتوقعة**: 20-25 دقيقة

---

*آخر تحديث: يناير 2026*
