# الدرس 17: TMA - جدول المواد الأثرية

## المقدمة

**بطاقة TMA** (جدول المواد الأثرية) هي الوحدة المتقدمة في PyArchInit لإدارة مواد الحفر وفقاً للمعايير الوزارية الإيطالية. تتيح التصنيف المفصل المتوافق مع معايير ICCD (المعهد المركزي للفهرسة والتوثيق).

### الخصائص الرئيسية

- تصنيف متوافق مع معايير ICCD
- إدارة المواد حسب الصندوق/الحاوية
- حقول زمنية مفصلة
- جدول المواد المرتبطة
- إدارة وسائط متكاملة
- تصدير الملصقات وبطاقات PDF

---

## الوصول إلى البطاقة

### عبر القائمة
1. قائمة **PyArchInit** في شريط قوائم QGIS
2. اختيار **بطاقة TMA**

### عبر شريط الأدوات
1. تحديد شريط أدوات PyArchInit
2. النقر على أيقونة **TMA**

---

## نظرة عامة على الواجهة

تقدم البطاقة واجهة معقدة مع حقول كثيرة.

### المناطق الرئيسية

| # | المنطقة | الوصف |
|---|---------|-------|
| 1 | شريط أدوات DBMS | التنقل، البحث، الحفظ |
| 2 | حقول التعريف | الموقع، المنطقة، الوحدة الطبقية، الصندوق |
| 3 | حقول الموقع | الإيداع، الغرفة، السبر |
| 4 | الحقول الزمنية | الفترة، القسم، التسلسلات الزمنية |
| 5 | جدول المواد | تفاصيل المواد المرتبطة |
| 6 | تبويب الوسائط | الصور والمستندات |

---

## حقول التعريف

### الموقع

**الحقل**: `comboBox_sito`
**قاعدة البيانات**: `sito`

الموقع الأثري (SCAN - تسمية الحفر ICCD).

### المنطقة

**الحقل**: `comboBox_area`
**قاعدة البيانات**: `area`

منطقة الحفر.

### الوحدة الطبقية (DSCU)

**الحقل**: `comboBox_us`
**قاعدة البيانات**: `dscu`

الوحدة الطبقية المصدرية (DSCU = وصف وحدة الحفر).

### القطاع

**الحقل**: `comboBox_settore`
**قاعدة البيانات**: `settore`

قطاع الحفر.

### الجرد

**الحقل**: `lineEdit_inventario`
**قاعدة البيانات**: `inventario`

رقم الجرد.

### الصندوق

**الحقل**: `lineEdit_cassetta`
**قاعدة البيانات**: `cassetta`

رقم الصندوق/الحاوية.

---

## حقول الموقع ICCD

### LDCT - نوع الإيداع

**الحقل**: `comboBox_ldct`
**قاعدة البيانات**: `ldct`

نوع مكان الإيداع.

**قيم ICCD:**
- متحف
- هيئة الآثار
- مستودع
- مختبر
- أخرى

### LDCN - تسمية الإيداع

**الحقل**: `lineEdit_ldcn`
**قاعدة البيانات**: `ldcn`

الاسم المحدد لمكان الحفظ.

### الإيداع السابق

**الحقل**: `lineEdit_vecchia_coll`
**قاعدة البيانات**: `vecchia_collocazione`

الإيداع السابق المحتمل.

### SCAN - تسمية الحفر

**الحقل**: `lineEdit_scan`
**قاعدة البيانات**: `scan`

الاسم الرسمي للحفر/البحث.

### السبر

**الحقل**: `comboBox_saggio`
**قاعدة البيانات**: `saggio`

السبر/الخندق المرجعي.

### الغرفة/اللوكوس

**الحقل**: `lineEdit_vano`
**قاعدة البيانات**: `vano_locus`

الغرفة أو اللوكوس المصدري.

---

## الحقول الزمنية

### DTZG - الفترة الزمنية

**الحقل**: `comboBox_dtzg`
**قاعدة البيانات**: `dtzg`

الفترة الزمنية العامة.

**أمثلة ICCD:**
- عصر البرونز
- عصر الحديد
- العصر الروماني
- العصور الوسطى

### DTZS - القسم الزمني

**الحقل**: `comboBox_dtzs`
**قاعدة البيانات**: `dtzs`

تقسيم الفترة.

**أمثلة:**
- مبكر/ة
- وسيط/ة
- متأخر/ة
- نهائي

### التسلسلات الزمنية

**الحقل**: `tableWidget_cronologie`
**قاعدة البيانات**: `cronologie`

جدول للتسلسلات الزمنية المتعددة أو المفصلة.

---

## حقول الاقتناء

### AINT - نوع الاقتناء

**الحقل**: `comboBox_aint`
**قاعدة البيانات**: `aint`

طريقة اقتناء المواد.

**قيم ICCD:**
- حفر
- مسح
- شراء
- تبرع
- مصادرة

### AIND - تاريخ الاقتناء

**الحقل**: `dateEdit_aind`
**قاعدة البيانات**: `aind`

تاريخ الاقتناء.

### RCGD - تاريخ المسح

**الحقل**: `dateEdit_rcgd`
**قاعدة البيانات**: `rcgd`

تاريخ المسح (إن كان مطبقاً).

### RCGZ - تفاصيل المسح

**الحقل**: `textEdit_rcgz`
**قاعدة البيانات**: `rcgz`

ملاحظات حول المسح.

---

## حقول المواد

### OGTM - المادة

**الحقل**: `comboBox_ogtm`
**قاعدة البيانات**: `ogtm`

المادة الرئيسية (نوع مادة الكائن).

**قيم ICCD:**
- سيراميك
- زجاج
- معدن
- عظم
- حجر
- طوب

### عدد القطع

**الحقل**: `spinBox_n_reperti`
**قاعدة البيانات**: `n_reperti`

العدد الإجمالي للقطع.

### الوزن

**الحقل**: `doubleSpinBox_peso`
**قاعدة البيانات**: `peso`

الوزن الإجمالي بالغرام.

### DESO - وصف الكائنات

**الحقل**: `textEdit_deso`
**قاعدة البيانات**: `deso`

وصف موجز للكائنات.

---

## جدول تفاصيل المواد

**الأداة**: `tableWidget_materiali`
**الجدول المرتبط**: `tma_materiali`

يتيح تسجيل المواد الفردية الموجودة في الصندوق.

### الأعمدة

| حقل ICCD | الوصف |
|----------|-------|
| MADI | جرد المادة |
| MACC | الفئة |
| MACL | الصنف |
| MACP | التحديد النمطي |
| MACD | التعريف |
| التسلسل الزمني | التأريخ المحدد |
| MACQ | الكمية |

### إدارة الصفوف

| الزر | الوظيفة |
|------|---------|
| + | إضافة مادة |
| - | إزالة مادة |

---

## حقول التوثيق

### FTAP - نوع الصورة

**الحقل**: `comboBox_ftap`
**قاعدة البيانات**: `ftap`

نوع التوثيق الفوتوغرافي.

### FTAN - رمز الصورة

**الحقل**: `lineEdit_ftan`
**قاعدة البيانات**: `ftan`

الرمز التعريفي للصورة.

### DRAT - نوع الرسم

**الحقل**: `comboBox_drat`
**قاعدة البيانات**: `drat`

نوع التوثيق الرسومي.

### DRAN - رمز الرسم

**الحقل**: `lineEdit_dran`
**قاعدة البيانات**: `dran`

الرمز التعريفي للرسم.

### DRAA - مؤلف الرسم

**الحقل**: `lineEdit_draa`
**قاعدة البيانات**: `draa`

مؤلف الرسم.

---

## تبويب الوسائط

إدارة الصور المرتبطة بالصندوق/TMA.

### الوظائف

- عرض الصور المصغرة
- سحب وإفلات لإضافة الصور
- نقر مزدوج للعرض
- ربط بقاعدة بيانات الوسائط

---

## تبويب عرض الجدول

عرض جدولي لجميع سجلات TMA للاستشارة السريعة.

### الوظائف

- عرض شبكي
- ترتيب حسب العمود
- مرشحات سريعة
- اختيار متعدد

---

## التصدير والطباعة

### تصدير PDF

| الخيار | الوصف |
|--------|-------|
| بطاقة TMA | بطاقة كاملة |
| الملصقات | ملصقات للصناديق |

### ملصقات الصناديق

توليد تلقائي للملصقات لـ:
- تعريف الصناديق
- المحتوى الموجز
- بيانات المصدر
- الباركود (اختياري)

---

## سير العمل التشغيلي

### تسجيل TMA جديد

1. **فتح البطاقة**
   - عبر القائمة أو شريط الأدوات

2. **سجل جديد**
   - النقر على "سجل جديد"

3. **بيانات التعريف**
   ```
   الموقع: الفيلا الرومانية
   المنطقة: 1000
   الوحدة الطبقية: 150
   الصندوق: C-001
   ```

4. **الموقع**
   ```
   LDCT: مستودع
   LDCN: مستودع هيئة الآثار
   SCAN: حفريات الفيلا الرومانية 2024
   ```

5. **التسلسل الزمني**
   ```
   DTZG: العصر الروماني
   DTZS: إمبراطوري
   ```

6. **المواد** (جدول)
   ```
   | الجرد | الفئة | الصنف | التعريف | الكمية |
   |-------|-------|-------|---------|--------|
   | 001 | سيراميك | عادي | قدر | 5 |
   | 002 | سيراميك | سيجيلاتا | طبق | 3 |
   | 003 | زجاج | - | عبوة عطر | 1 |
   ```

7. **الحفظ**
   - النقر على "حفظ"

---

## أفضل الممارسات

### معايير ICCD

- استخدام المفردات المحكمة ICCD
- احترام الاختصارات الرسمية
- الحفاظ على اتساق المصطلحات

### تنظيم الصناديق

- ترقيم تسلسلي فريد
- TMA واحد لكل صندوق فعلي
- الفصل حسب الوحدة الطبقية قدر الإمكان

### التوثيق

- ربط الصور والرسومات دائماً
- استخدام رموز فريدة للوسائط
- تسجيل المؤلف والتاريخ

---

## استكشاف الأخطاء وإصلاحها

### المشكلة: مفردات ICCD غير متاحة

**السبب**: القاموس غير مُكون.

**الحل**:
1. استيراد مفردات ICCD القياسية
2. التحقق من تكوين القاموس

### المشكلة: المواد لا تُحفظ

**السبب**: جدول المواد غير متزامن.

**الحل**:
1. التحقق من ملء جميع الحقول الإلزامية
2. حفظ البطاقة الرئيسية قبل إضافة المواد

---

## المراجع

### قاعدة البيانات

- **الجدول الرئيسي**: `tma_materiali_archeologici`
- **جدول التفاصيل**: `tma_materiali`
- **فئة المحول**: `TMA`، `TMA_MATERIALI`
- **المعرف**: `id`

### الملفات المصدرية

- **واجهة المستخدم**: `gui/ui/Tma.ui`
- **المتحكم**: `tabs/Tma.py`
- **تصدير PDF**: `modules/utility/pyarchinit_exp_Tmasheet_pdf.py`
- **الملصقات**: `modules/utility/pyarchinit_tma_label_pdf.py`

---

## فيديوهات تعليمية

### تصنيف TMA
**المدة**: 15-18 دقيقة
- معايير ICCD
- ملء كامل
- إدارة المواد

[فيديو مؤقت: video_tma_catalogazione.mp4]

### توليد الملصقات
**المدة**: 5-6 دقائق
- تكوين الملصقات
- الطباعة بالدفعات
- التخصيص

[فيديو مؤقت: video_tma_etichette.mp4]

---

*آخر تحديث: يناير 2026*
*PyArchInit - نظام إدارة البيانات الأثرية*
